<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="mona.joyhentai.dao.BooksPagesMapper" >
  <resultMap id="BaseResultMap" type="mona.joyhentai.model.BooksPages" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 11 22:48:32 CST 2021.
    -->
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="book_id" property="bookId" jdbcType="INTEGER" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="suffix" property="suffix" jdbcType="VARCHAR" />
    <result column="page" property="page" jdbcType="INTEGER" />
    <result column="status" property="status" jdbcType="INTEGER" />
    <result column="url" property="url" jdbcType="VARCHAR" />
  </resultMap>

  <select id="getNotDownSuccessBooksPages" resultMap="BaseResultMap" parameterType="java.lang.Integer">

    select id, book_id, name, suffix, page, status, url
    from books_pages
    where book_id = #{bookId,jdbcType=INTEGER} and status != 1
  </select>

  <update id="updateBooksPageStatus" parameterType="java.util.List" >
    <foreach collection="booksPages" item="item" index="index" open="" close="" separator=";">
      update books_pages
        <set>
          status = #{item.status,jdbcType=INTEGER},
          suffix = #{item.suffix,jdbcType=VARCHAR},
          url = #{item.url,jdbcType=VARCHAR}
        </set>
      where id = #{item.id,jdbcType=INTEGER}
    </foreach>
  </update>

  <insert id="addBooksPages" parameterType="java.util.List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 11 22:48:32 CST 2021.
    -->
    insert into books_pages (id, book_id, name,
    suffix, page, status,
    url)
    values
    <foreach collection="booksPages" item="item" index="index" separator=",">
      (#{item.id,jdbcType=INTEGER},
      #{item.bookId,jdbcType=INTEGER},
      #{item.name,jdbcType=VARCHAR},
      #{item.suffix,jdbcType=VARCHAR},
      #{item.page,jdbcType=INTEGER},
      #{item.status,jdbcType=INTEGER},
      #{item.url,jdbcType=VARCHAR})
    </foreach>
  </insert>

  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 11 22:48:32 CST 2021.
    -->
    delete from books_pages
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="mona.joyhentai.model.BooksPages" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 11 22:48:32 CST 2021.
    -->
    insert into books_pages (id, book_id, name,
    suffix, page, status,
    url)
    values (#{id,jdbcType=INTEGER}, #{bookId,jdbcType=INTEGER}, #{name,jdbcType=VARCHAR},
    #{suffix,jdbcType=VARCHAR}, #{page,jdbcType=INTEGER}, #{status,jdbcType=INTEGER},
    #{url,jdbcType=VARCHAR})
  </insert>
  <update id="updateByPrimaryKey" parameterType="mona.joyhentai.model.BooksPages" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 11 22:48:32 CST 2021.
    -->
    update books_pages
    set book_id = #{bookId,jdbcType=INTEGER},
    name = #{name,jdbcType=VARCHAR},
    suffix = #{suffix,jdbcType=VARCHAR},
    page = #{page,jdbcType=INTEGER},
    status = #{status,jdbcType=INTEGER},
    url = #{url,jdbcType=VARCHAR}
    where id = #{id,jdbcType=INTEGER}
  </update>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 11 22:48:32 CST 2021.
    -->
    select id, book_id, name, suffix, page, status, url
    from books_pages
    where id = #{id,jdbcType=INTEGER}
  </select>
  <select id="selectAll" resultMap="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 11 22:48:32 CST 2021.
    -->
    select id, book_id, name, suffix, page, status, url
    from books_pages
  </select>
</mapper>